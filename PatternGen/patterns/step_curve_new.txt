dev step_curve_new

reg CAL
reg SBI
reg SPHI1
reg SPHI2
reg SEB
reg internal ISSR   #internal signal pattern, not routed to output
reg RESET
reg R12
reg RBI
reg RPHI1
reg RPHI2
reg LE

wire IS1 : ISSR
wire IS2 : ISSR
wire SR  : ISSR
wire CS  : 0

#Analog voltage defaults
wire Vthr: 16'H0025
wire Aref: 16'H0033
wire Vana: 16'H0066
wire RG:   16'H0033

stage CLEAR_ALL 1
#0-99
CAL   : ----------
SBI   : ----------
SPHI1 : ----------
SPHI2 : ----------
SEB   : __________
ISSR  : __________
RESET : ----------
R12   : __________
RBI   : ----------
RPHI1 : ----------
RPHI2 : ----------
LE    : ----------

stage PIPELINE_SETUP 1
CAL   : ---------- ---------- ----
SBI   : __________ __________ ____
SPHI1 : --________ __________ ____
SPHI2 : --________ __________ ____
SEB   : --------__ __________ ____
ISSR  : ---------- ---------- ----
RESET : ---------- ------____ ____
R12   : ---------- ---------- ----
RBI   : ---------- ---------- ----
RPHI1 : ---------- ---------- ----
RPHI2 : ---------- ---------- ----
LE    : ---------- ---------- ----


stage PIPELINE_CYCLE_FULL 5
CAL   : ---------------------------------------------------------------------------------------------------------------------------------
SBI   : _--______________________________________________________________________________________________________________________________
SPHI1 : _-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___
SPHI2 : ___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-_
SEB   : _________________________________________________________________________________________________________________________________
ISSR  : ---------------------------------------------------------------------------------------------------------------------------------
RESET : _________________________________________________________________________________________________________________________________
R12   : ---------------------------------------------------------------------------------------------------------------------------------
RBI   : ---------------------------------------------------------------------------------------------------------------------------------
RPHI1 : ---------------------------------------------------------------------------------------------------------------------------------
RPHI2 : ---------------------------------------------------------------------------------------------------------------------------------
LE    : ---------------------------------------------------------------------------------------------------------------------------------

stage CAL_INJECT 1
CAL   : -------------------------________________________________________________________________________________________________________
SBI   : _--______________________________________________________________________________________________________________________________
SPHI1 : _-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___
SPHI2 : ___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-___-_
SEB   : _________________________________________________________________________________________________________________________________
ISSR  : ---------------------------------------------------------------------------------------------------------------------------------
RESET : _________________________________________________________________________________________________________________________________
R12   : ---------------------------------------------------------------------------------------------------------------------------------
RBI   : ---------------------------------------------------------------------------------------------------------------------------------
RPHI1 : ---------------------------------------------------------------------------------------------------------------------------------
RPHI2 : ---------------------------------------------------------------------------------------------------------------------------------
LE    : ---------------------------------------------------------------------------------------------------------------------------------

stage CHARGE_SHIFT_1 1
CAL   : ____________________________
SBI   : ________________________---_
SPHI1 : _____________----_______-___
SPHI2 : _____________----_________-_
SEB   : ____------------------------
ISSR  : -----_______________________
RESET : __--------------------------
R12   : ------______________________
RBI   : ----------------------------
RPHI1 : ----------------------------
RPHI2 : ----------------------------
LE    : ----------------------------

stage PIPELINE_SHIFT_IN variable
CAL   : ____
SBI   : ____
SPHI1 : -___
SPHI2 : __-_
SEB   : ----
ISSR  : ____
RESET : ----
R12   : ____
RBI   : ----
RPHI1 : ----
RPHI2 : ----
LE    : ----

stage CHARGE_SHIFT_2 1
CAL   : ________________________________
SBI   : ________________________________
SPHI1 : ________________________________
SPHI2 : ________________________________
SEB   : ---------------------________---
ISSR  : ________________________________
RESET : ------__________________________
R12   : ________________________________
RBI   : --------------------------------
RPHI1 : --------------------------------
RPHI2 : --------------------------------
LE    : --______________________________

stage READOUT_SETUP_1 1
CAL   : ____
SBI   : ____
SPHI1 : ____
SPHI2 : ____
SEB   : ----
ISSR  : ____
RESET : ____
R12   : ____
RBI   : --__
RPHI1 : ----
RPHI2 : ----
LE    : ____

#This was the long delay in Adrian's pattern
stage READOUT_SETUP_2 200
CAL   : _
SBI   : _
SPHI1 : _
SPHI2 : _
SEB   : -
ISSR  : _
RESET : _
R12   : _
RBI   : _
RPHI1 : -
RPHI2 : -
LE    : _

stage READOUT_SETUP_3 1
CAL   : ____________
SBI   : ____________
SPHI1 : ____________
SPHI2 : ____________
SEB   : ------------
ISSR  : ____________
RESET : ____________
R12   : ____________
RBI   : __---_______
RPHI1 : __--________
RPHI2 : ____________
LE    : ________----

stage READOUT 127 #Readout
#CAL   : _______________________________________________________________________________________
#SBI   : _______________________________________________________________________________________
#SPHI1 : _______________________________________________________________________________________
#SPHI2 : _______________________________________________________________________________________
#SEB   : ---------------------------------------------------------------------------------------
#ISSR  : _______________________________________________________________________________________
#RESET : _______________________________________________________________________________________
#R12   : _______________________________________________________________________________________
#RBI   : _______________________________________________________________________________________
#RPHI1 : ______________________________________________________________________________________-
#RPHI2 : _------------------------------------------------------------------------------------__
#LE    : ---------------------------------------------------------------------------------------

CAL   : _______________________
SBI   : _______________________
SPHI1 : _______________________
SPHI2 : _______________________
SEB   : -----------------------
ISSR  : _______________________
RESET : _______________________
R12   : _______________________
RBI   : _______________________
RPHI1 : ______________________-
RPHI2 : _--------------------__
LE    : -----------------------
